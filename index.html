<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Neon Crest — Warangal OneStop</title>
<meta name="theme-color" content="#0a1330"/>
<link rel="manifest" href="/manifest.json"/>
<link rel="icon" href="/icon-192.png" sizes="192x192"/>
<link rel="apple-touch-icon" href="/icon-192.png"/>
<style>
  :root{
    --bgA:#0a1330; --bgB:#121a50;        /* deep night */
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; overflow:hidden;
    background:linear-gradient(135deg,var(--bgA),var(--bgB));
    font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  }
  /* Full-bleed canvas background (works in Wix + Vercel) */
  #scene{position:fixed; inset:0; width:100vw; height:100vh; display:block; background:transparent}
</style>
</head>
<body>
<canvas id="scene"></canvas>

<script>
/* =========================================================
   Pure-canvas neon hero (no logo, no header, no footer)
   - Starfield
   - Single multi-color wave with BIG right crest
   - Merged orb glow into crest (no DOM layers)
   - Mobile-friendly: crest scales down 20–30%
========================================================= */
(() => {
  const c = document.getElementById('scene');
  const ctx = c.getContext('2d');
  let t = 0, hue = 0, stars = [];

  function DPR(){ return (window.devicePixelRatio||1); }

  function resize(){
    const d = DPR();
    c.width  = Math.floor(innerWidth * d);
    c.height = Math.floor(innerHeight * d);
    ctx.setTransform(d,0,0,d,0,0);
    // random starfield
    const count = innerWidth < 640 ? 26 : 44;
    stars = Array.from({length:count}, ()=>({
      x: Math.random()*innerWidth,
      y: Math.random()*innerHeight,
      r: Math.random()*1.7 + .4,
      s: Math.random()*3.5 + 1.2   // twinkle speed
    }));
  }
  addEventListener('resize', resize, {passive:true});
  resize();

  /* --- helpers --- */
  const clamp = (n,min,max)=> Math.max(min,Math.min(max,n));
  // big right crest: Gaussian bump that multiplies amplitude near 78% width
  function crest(x,w){
    const cx = w*0.78, sig = w*0.10;
    return 1 + 1.85*Math.exp(-((x-cx)*(x-cx))/(2*sig*sig));
  }
  function neonGradient(w){
    const g = ctx.createLinearGradient(0,0,w,0);
    const drift = (Math.sin(t/800)+1)/2 * 0.30;
    g.addColorStop((0.00+drift)%1, `hsl(${(190+hue)%360} 100% 64%)`); // cyan
    g.addColorStop((0.45+drift)%1, `hsl(${(290+hue)%360} 100% 65%)`); // violet
    g.addColorStop((0.78+drift)%1, `hsl(${(18 +hue)%360} 100% 61%)`); // orange
    g.addColorStop((0.98+drift)%1, `hsl(${(108+hue)%360} 98% 63%)`);  // lime
    return g;
  }

  function drawStars(){
    for(const s of stars){
      const o = .35 + .65*Math.abs(Math.sin((t/s.s)/42));
      ctx.fillStyle = `rgba(255,255,255,${o})`;
      ctx.shadowBlur = 6; ctx.shadowColor = 'rgba(255,255,255,.9)';
      ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill();
    }
    ctx.shadowBlur = 0;
  }

  function drawWave(){
    const w = c.width / DPR();
    const h = c.height / DPR();

    // base tide height (gently goes up/down)
    const tide = h*0.52 + Math.sin(t/700)*h*0.07;

    // mobile crest shrink
    const mobileScale = innerWidth < 640 ? 0.78 : 1.0;

    // depth ambience
    const glowBg = ctx.createLinearGradient(0,0,w,0);
    glowBg.addColorStop(0,'rgba(34,230,255,.16)');
    glowBg.addColorStop(.5,'rgba(155,77,255,.14)');
    glowBg.addColorStop(1,'rgba(255,139,34,.14)');
    ctx.fillStyle = glowBg;
    ctx.fillRect(0,0,w,h);

    // layers from back to front (halo + core each)
    const layers = [
      {amp:50*mobileScale, th:12, a:.95, ph:0,   sp:.58},
      {amp:40*mobileScale, th:10, a:.78, ph:120, sp:.55},
      {amp:32*mobileScale, th: 8, a:.66, ph:240, sp:.52}
    ];

    // merged crest glow "orb" (soft radial behind right crest)
    const cx = w*0.78, cy = tide - 34*mobileScale;
    const crestRad = Math.max(140, w*0.18*mobileScale);
    const crestG = ctx.createRadialGradient(cx,cy,10, cx,cy,crestRad);
    crestG.addColorStop(0,'rgba(255,255,255,.36)');
    crestG.addColorStop(.5,'rgba(255,255,255,.12)');
    crestG.addColorStop(1,'rgba(255,255,255,0)');
    ctx.fillStyle = crestG; ctx.beginPath();
    ctx.arc(cx, cy, crestRad, 0, Math.PI*2); ctx.fill();

    // subtle vertical glass streaks behind crest
    const streak = ctx.createLinearGradient(cx-80,0,cx+80,0);
    streak.addColorStop(0,'rgba(255,255,255,0)');
    streak.addColorStop(.5,'rgba(255,255,255,.06)');
    streak.addColorStop(1,'rgba(255,255,255,0)');
    ctx.fillStyle = streak; ctx.fillRect(cx-80,0,160,h);

    for(const L of layers){
      // halo
      ctx.lineJoin='round'; ctx.lineCap='round';
      ctx.shadowBlur = 16; ctx.shadowColor='rgba(255,255,255,.55)';
      ctx.globalAlpha = L.a*0.42; ctx.lineWidth = L.th*2.5; ctx.strokeStyle = neonGradient(w);
      ctx.beginPath();
      for(let x=0;x<=w;x++){
        const a = L.amp*crest(x,w);
        const y = tide
          + Math.sin((x - t*L.sp + L.ph)/62)*a
          + Math.sin((x - t*L.sp*0.8 + L.ph)/22)*(a*0.40)
          + Math.cos((x - t*L.sp*1.1)/170)*(a*0.22);
        x?ctx.lineTo(x,y):ctx.moveTo(0,y);
      }
      ctx.stroke();

      // core
      ctx.shadowBlur = 0; ctx.globalAlpha = L.a; ctx.lineWidth = L.th; ctx.strokeStyle = neonGradient(w);
      ctx.beginPath();
      for(let x=0;x<=w;x++){
        const a = L.amp*crest(x,w);
        const y = tide
          + Math.sin((x - t*L.sp + L.ph)/62)*a
          + Math.sin((x - t*L.sp*0.8 + L.ph)/22)*(a*0.40)
          + Math.cos((x - t*L.sp*1.1)/170)*(a*0.22);
        x?ctx.lineTo(x,y):ctx.moveTo(0,y);
      }
      ctx.stroke();
    }

    // left spark (hot spot where the wave starts)
    const sx = 22, sy = tide + Math.sin((0 - t*.58)/62)*layers[0].amp;
    const sg = ctx.createRadialGradient(sx,sy,6, sx,sy,46);
    sg.addColorStop(0,'rgba(255,255,255,.70)'); sg.addColorStop(1,'rgba(255,255,255,0)');
    ctx.fillStyle = sg; ctx.beginPath(); ctx.arc(sx,sy,46,0,Math.PI*2); ctx.fill();
  }

  function tick(){
    const w = c.width / DPR(), h = c.height / DPR();
    ctx.clearRect(0,0,w,h);
    drawStars();
    drawWave();
    t += 0.9;                 // slower, smoother flow
    hue = (hue + 0.7) % 360;  // continuous colour drift
    requestAnimationFrame(tick);
  }
  tick();
})();
</script>

<script>
  // PWA register (safe to ignore on Wix; works when hosted on Vercel with https)
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js').catch(()=>{});
    });
  }
</script>
</body>
</html>
